<div class="max-w-4xl mx-auto">
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-white mb-2">Conquistas</h1>
    <p class="text-gray-400">Desbloqueie conquistas estudando a Palavra de Deus</p>
  </div>

  <!-- Stats -->
  <div class="bg-[#1A2C32] rounded-xl p-4 border border-[#37464F] mb-8">
    <div class="flex items-center justify-center gap-8">
      <div class="text-center">
        <div class="text-3xl font-bold text-[#FFC800]"><%= @earned_badge_ids.size %></div>
        <div class="text-sm text-gray-400">Conquistados</div>
      </div>
      <div class="w-px h-12 bg-[#37464F]"></div>
      <div class="text-center">
        <div class="text-3xl font-bold text-gray-500"><%= Badge.count - @earned_badge_ids.size %></div>
        <div class="text-sm text-gray-400">Bloqueados</div>
      </div>
    </div>
  </div>

  <!-- Badges by Category -->
  <% Badge.categories.keys.each do |category| %>
    <% badges = @badges_by_category[category] || [] %>
    <% next if badges.empty? %>

    <div class="mb-8">
      <h2 class="text-lg font-bold text-white mb-4 capitalize">
        <%= case category
            when "streak" then "ðŸ”¥ SequÃªncia"
            when "xp" then "â­ ExperiÃªncia"
            when "lessons" then "ðŸ“š LiÃ§Ãµes"
            when "perfect" then "âœ¨ PerfeiÃ§Ã£o"
            when "league" then "ðŸ… Ligas"
            when "special" then "ðŸŽ Especiais"
            else category.humanize
            end %>
      </h2>

      <div class="grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-4">
        <% badges.each do |badge| %>
          <% earned = @earned_badge_ids.include?(badge.id) %>
          <div class="text-center">
            <div class="relative inline-block">
              <div class="w-16 h-16 rounded-full flex items-center justify-center text-3xl <%= earned ? 'bg-[#FFC800]/20' : 'bg-[#232F36] grayscale opacity-50' %>">
                <%= badge.icon %>
              </div>
              <% if earned %>
                <div class="absolute -bottom-1 -right-1 w-6 h-6 bg-[#58CC02] rounded-full flex items-center justify-center">
                  <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7"/>
                  </svg>
                </div>
              <% end %>
            </div>
            <div class="mt-2">
              <div class="text-xs font-medium <%= earned ? 'text-white' : 'text-gray-500' %>"><%= badge.name %></div>
              <div class="text-xs text-gray-500"><%= badge.description.truncate(30) if badge.description %></div>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
