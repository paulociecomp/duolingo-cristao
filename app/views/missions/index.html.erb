<div class="max-w-lg mx-auto">
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-white mb-2">MissÃµes DiÃ¡rias</h1>
    <p class="text-gray-400">Complete missÃµes para ganhar XP e Gems extras</p>
  </div>

  <div class="space-y-4">
    <% @missions.each do |user_mission| %>
      <% mission = user_mission.daily_mission %>
      <div class="bg-[#1A2C32] rounded-xl border border-[#37464F] p-4 <%= user_mission.completed? ? 'bg-[#58CC02]/10 border-[#58CC02]/50' : '' %>">
        <div class="flex items-center gap-4">
          <div class="text-3xl"><%= mission.icon %></div>

          <div class="flex-1">
            <div class="font-semibold text-white"><%= mission.name %></div>
            <div class="text-sm text-gray-400"><%= mission.description %></div>

            <div class="mt-2">
              <div class="flex items-center justify-between text-sm mb-1">
                <span class="text-gray-400"><%= user_mission.current_value %> / <%= mission.target_value %></span>
                <span class="text-gray-400"><%= user_mission.progress_percentage %>%</span>
              </div>
              <div class="w-full bg-[#37464F] rounded-full h-2">
                <div class="h-2 rounded-full transition-all <%= user_mission.completed? ? 'bg-[#58CC02]' : 'bg-[#1CB0F6]' %>" style="width: <%= user_mission.progress_percentage %>%"></div>
              </div>
            </div>
          </div>

          <div class="text-right">
            <% if user_mission.completed? && !user_mission.claimed? %>
              <%= button_to claim_mission_path(user_mission), method: :post, class: "bg-[#58CC02] hover:bg-[#4CAF00] text-white font-semibold px-4 py-2 rounded-lg transition" do %>
                Coletar
              <% end %>
            <% elsif user_mission.claimed? %>
              <div class="text-[#58CC02] font-semibold">âœ“ Coletado</div>
            <% else %>
              <div class="text-sm text-gray-500">
                <div class="flex items-center gap-1 text-[#FFC800]">
                  <span>â­</span>
                  <span>+<%= mission.xp_reward %></span>
                </div>
                <% if mission.gem_reward > 0 %>
                  <div class="flex items-center gap-1 text-[#1CB0F6]">
                    <span>ğŸ’</span>
                    <span>+<%= mission.gem_reward %></span>
                  </div>
                <% end %>
              </div>
            <% end %>
          </div>
        </div>
      </div>
    <% end %>
  </div>

  <% if @missions.empty? %>
    <div class="text-center py-12">
      <div class="text-6xl mb-4">â­</div>
      <h2 class="text-xl font-semibold text-white mb-2">MissÃµes carregando...</h2>
      <p class="text-gray-400">As missÃµes diÃ¡rias serÃ£o geradas quando vocÃª comeÃ§ar a estudar.</p>
    </div>
  <% end %>
</div>
